$(document).ready((function(){$(document).keypress((function(e){"13"==e.which&&e.preventDefault()})),$.widget("custom.combobox",{_create:function(){this.wrapper=$("<span>").addClass("custom-combobox").insertAfter(this.element),this.element.hide(),this._createAutocomplete()},_createAutocomplete:function(){var e=this.element.children(":selected"),u=e.val()?e.text():"";this.input=$("<input>").appendTo(this.wrapper).val(u).attr("placeholder",this.element.attr("placeholder")||"Search...").autocomplete({delay:0,minLength:0,source:$.proxy(this,"_source")}).tooltip({classes:{"ui-tooltip":"ui-state-highlight"}});for(var t=this.element.length-1;t>=0;t--)for(var a=this.element[t].className.split(" "),c=0;c<a.length;c++)"is--hidden"!=a[c]&&this.input.addClass(a[c]);this._on(this.input,{autocompleteselect:function(e,u){u.item.option.selected=!0,this._trigger("select",e,{item:u.item.option}),dpForm.triggerChange()},autocompletechange:"_removeIfInvalid"})},_createShowAllButton:function(){var e=this.input,u=!1;$("<a>").attr("tabIndex",-1).attr("title","Show All Items").tooltip().appendTo(this.wrapper).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("custom-combobox-toggle ui-corner-right").on("mousedown",(function(){u=e.autocomplete("widget").is(":visible")})).on("click",(function(){e.trigger("focus"),u||e.autocomplete("search","")}))},_source:function(e,u){var t=new RegExp($.ui.autocomplete.escapeRegex(e.term),"i");u(this.element.children("option").map((function(){var u=$(this).text(),a=u.toLowerCase().replace(/[\xc0-\xc5\xe0-\xe5\u0100-\u0105\u0386\u0391\u03ac\u03b1\u0410\u0430\u05d0]/g,"a").replace(/[\xc8-\xcb\xe8-\xeb\u0116-\u011b\u0112\u0113\u0388\u0395\u03ad\u03b5\u042d\u044d]/g,"e").replace(/[\xa1\xcc-\xcf\xec-\xef\u0128-\u012b\u012e-\u0132\u013a\u0389\u038a\u0390\u0397\u0399\u03aa\u03ae\u03af\u03b7\u03b9\u03ca\u0418\u0438]/g,"i").replace(/[\xd2-\xd6\xd8\xf0\xf2-\xf6\xf8\u014d\u014c\u0150\u0151\u038c\u038f\u039f\u03a9\u03bf\u03c9\u03cc\u03ce\u041e\u043e]/g,"o").replace(/[\xb5\xd9-\xdc\xf9-\xfc\u0171\u0173\u0168-\u0170\u0423\u0443]/g,"u").replace(/[\u0392\u03b2\u05d1]/g,"b").replace(/[\xc7\xe7\u0106-\u010d\u0147\u0148\u05da\u05db]/g,"c").replace(/[\xd0\u010e-\u0111\u0394\u03b4\u05d3]/g,"d").replace(/[\u03a6\u03c6]/g,"f").replace(/[\u011c-\u0123\u0393\u03b3\u05d2]/g,"g").replace(/[\u0124-\u0127\u05d4]/g,"h").replace(/[\u0134\u0135]/g,"j").replace(/[\u0136\u0137\u039a\u03ba\u05d7\u05e7]/g,"k").replace(/[\u0139-\u013e\u0141\u0142\u039b\u03bb\u05dc]/g,"l").replace(/[\u039c\u03bc\u05dd\u05de]/g,"m").replace(/[\xd1\xf1\u0143-\u0148\u039d\u03bd\u05df\u05e0]/g,"n").replace(/[\u0154-\u0159\u03a1\u03c1\u05e8]/g,"r").replace(/[\u03a0\u03c0\u05e3\u05e4]/g,"p").replace(/[\x8a\x9a\xdf\u015a-\u0161\u03a3\u03c2\u03c3\u05e1]/g,"s").replace(/[\u0162-\u0167\u021a\u021b\u03a4\u03c4\u05d8\u05ea]/g,"t").replace(/[\u05d5]/g,"v").replace(/[\u03be\u039e]/g,"x").replace(/[\x9f\xdd\xfd\xff\u038e\u03a5\u03ab\u03b0\u03c5\u03cb\u03cd\u05d9]/g,"y").replace(/[\x9e\u0179-\u017e\u0396\u03b6\u05d6]/g,"z").replace(/[\u05e2]/g,"aa").replace(/[\xc6\xe6]/g,"ae").replace(/[\u03a7\u03c7]/g,"ch").replace(/[\u039e\u03be\u0152\u0153]/g,"oe").replace(/[\xde\xfe\u0398\u03b8]/g,"th").replace(/[\u05e5\u05e6]/g,"ts").replace(/[\u03c8\u03a8\u0398\u03b8]/g,"ps").replace(/[\u05e9]/g,"sh").replace(/[\xdf]/g,"sz").replace(/[^a-z 0-9 \-]+/g,"");if(this.value&&(!e.term||t.test(u)||t.test(a)))return{label:u,value:u,option:this}})))},_removeIfInvalid:function(e,u){if(!u.item){var t=this.input.val().toLowerCase(),a=!1;this.element.children("option").each((function(){if($(this).text().toLowerCase()===t)return this.selected=a=!0,!1})),a||(this.input.val(""),this.element.val(""),this._delay((function(){}),2500),this.input.autocomplete("instance").term="",dpForm.triggerChange())}},_destroy:function(){this.wrapper.remove(),this.element.show()}}),$("#member").combobox()}));